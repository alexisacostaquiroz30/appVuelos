"use strict";(self.webpackChunkpd_free_angularcli=self.webpackChunkpd_free_angularcli||[]).push([[130],{1130:(N,v,l)=>{l.r(v),l.d(v,{AdminLayoutModule:()=>k});var g=l(646),c=l(6895),s=l(433),d=l(8754),e=l(8256),b=l(529);let _=(()=>{class t{constructor(o){this.http=o,this.baseUrl="http://localhost:3000"}get(o){return this.http.get(this.baseUrl+o)}post(o,i){return this.http.post(this.baseUrl+o,i)}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(b.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=l(7185);function A(t,n){if(1&t&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.Q6J("value",o.idAereopuerto),e.xp6(1),e.Oqu(o.nombreAereopuerto)}}function Z(t,n){if(1&t&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.Q6J("value",o.idAereopuerto),e.xp6(1),e.Oqu(o.nombreAereopuerto)}}function T(t,n){if(1&t&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.Q6J("value",o.idAereolinea),e.xp6(1),e.Oqu(o.nombreAereolinea)}}function C(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"td")(14,"button",24),e.NdJ("click",function(){const a=e.CHM(o).$implicit,u=e.oxw();return e.KtG(u.verDisponibilidad(a.idVuelo))}),e._UZ(15,"i",25),e.qZA()()()}if(2&t){const o=n.$implicit;e.xp6(2),e.Oqu(o.numeroVuelo),e.xp6(2),e.Oqu(o.idOrigen.nombreAereopuerto),e.xp6(2),e.Oqu(o.idDestino.nombreAereopuerto),e.xp6(2),e.Oqu(e.xi3(9,5,o.fechaSalida,"dd/MM/yyyy HH:mm")),e.xp6(3),e.Oqu(e.xi3(12,8,o.fechaLlegada,"dd/MM/yyyy HH:mm"))}}function q(t,n){if(1&t&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.Q6J("value",o.idUsuario),e.xp6(1),e.AsE("",o.nombre," ",o.apellidos,"")}}function x(t,n){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"button",27),e.NdJ("click",function(){const a=e.CHM(o).index,u=e.oxw().index,h=e.oxw(2),p=e.MAs(76);return e.KtG(h.open(p,u+1,a+1))}),e._uU(2),e.qZA(),e.BQk()}if(2&t){const o=n.index,i=e.oxw().index,r=e.oxw().$implicit,a=e.oxw();e.xp6(1),e.ekj("pasillo",(o+1)%5==0)("ocupado",a.esAsientoOcupado(r,i+1,o+1)),e.xp6(1),e.hij(" ",(o+1)%5==0?"":i+1+"-"+(o+1)," ")}}function D(t,n){if(1&t&&(e.ynx(0),e.TgZ(1,"div",26),e.YNc(2,x,3,5,"ng-container",17),e.qZA(),e.BQk()),2&t){const o=e.oxw().$implicit,i=e.oxw();e.xp6(2),e.Q6J("ngForOf",i.Array(o.idAvion.numeroAsientos+2).fill(""))}}function U(t,n){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,D,3,1,"ng-container",17),e._UZ(2,"br"),e.qZA()),2&t){const o=n.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngForOf",i.Array(o.idAvion.numeroFilas).fill(""))}}function y(t,n){if(1&t){const o=e.EpF();e._UZ(0,"div",28),e.TgZ(1,"div",29),e._uU(2),e.qZA(),e.TgZ(3,"div",30)(4,"button",31),e.NdJ("click",function(){const a=e.CHM(o).$implicit;return e.KtG(a.close(""))}),e._uU(5,"Cancelar"),e.qZA(),e.TgZ(6,"button",32),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.crearReserva())}),e._uU(7,"Confirmar"),e.qZA()()}if(2&t){const o=e.oxw();e.xp6(2),e.AsE(" \xbfQuieres reservar el asiento ",o.asientoReserva," de la fila ",o.filaReserva,"? ")}}function O(t,n){if(1&t&&(e.TgZ(0,"option",15),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.Q6J("value",o.idUsuario),e.xp6(1),e.AsE("",o.nombre," ",o.apellidos,"")}}function J(t,n){if(1&t&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA()()),2&t){const o=n.$implicit;e.xp6(2),e.Oqu(o.idVuelo2.numeroVuelo),e.xp6(2),e.Oqu(o.idVuelo2.idOrigen.nombreAereopuerto),e.xp6(2),e.Oqu(o.idVuelo2.idDestino.nombreAereopuerto),e.xp6(2),e.Oqu(e.xi3(9,7,o.idVuelo2.fechaSalida,"dd/MM/yyyy HH:mm")),e.xp6(3),e.Oqu(e.xi3(12,10,o.idVuelo2.fechaLlegada,"dd/MM/yyyy HH:mm")),e.xp6(3),e.AsE("Fi ",o.numeroFila,"-As ",o.numeroAsiento,"")}}const R=[{path:"dashboard",component:(()=>{class t{constructor(o,i,r,a){this.backService=o,this.formBuilder=i,this.modalService=r,this.toastr=a,this.fila=0,this.asientos=0,this.Array=Array,this.closeResult="",this.asientoReserva=0,this.filaReserva=0,this.clienteReserva=0,this.formulario=this.formBuilder.group({aeropuertoOrigen:[""],aeropuertoDestino:[""],aerolinea:[""],cliente:[""]})}ngOnInit(){this.obtenerDatosVuelo(),this.obtenerDatosAereolinea(),this.obtenerDatosAereopuerto(),this.obtenerDatosClientes()}obtenerDatosAereolinea(){this.backService.get("/Aereolinea").subscribe(o=>{this.datosAereolinea=o})}obtenerDatosAereopuerto(){this.backService.get("/aereopuerto").subscribe(o=>{this.datosAereopuerto=o})}obtenerDatosClientes(){this.backService.get("/usuario").subscribe(o=>{this.datosClientes=o})}obtenerDatosVuelo(){this.backService.get("/vuelo").subscribe(o=>{this.datosVuelos=o,this.datosVuelosFilter=this.datosVuelos})}limpiarSeleccion(){this.datosVuelosFilter=this.datosVuelos}aplicarFiltros(){const{aeropuertoOrigen:o,aeropuertoDestino:i,aerolinea:r}=this.formulario.value;this.datosVuelosFilter=this.datosVuelos.filter(a=>!(o&&a.idOrigen.idAereopuerto!=o||i&&a.idDestino.idAereopuerto!=i||r&&a.idAvion.idAereolinea2.idAereolinea!=r))}verDisponibilidad(o){this.backService.get("/vuelo/"+o).subscribe(i=>{this.fila=i[0].idAvion.numeroFilas,this.asientos=i[0].idAvion.numeroAsientos+2,this.datosReserva=i})}esAsientoOcupado(o,i,r){return o.reservas.some(a=>a.numeroFila===i&&a.numeroAsiento===r)}open(o,i,r){const{cliente:p}=this.formulario.value;p?(this.clienteReserva=p,this.filaReserva=i,this.asientoReserva=r,this.modalService.open(o,{ariaLabelledBy:"modal-basic-title"}).result.then(m=>{this.closeResult=`Closed with: ${m}`},m=>{this.closeResult=`Dismissed ${this.getDismissReason(m)}`})):this.showNotification()}getDismissReason(o){return o===d.If.ESC?"by pressing ESC":o===d.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${o}`}crearReserva(){this.backService.post("/Reserva",{idCliente2:this.clienteReserva,idVuelo2:this.datosReserva[0].idVuelo,numeroFila:this.filaReserva,numeroAsiento:this.asientoReserva}).subscribe(i=>{this.verDisponibilidad(this.datosReserva[0].idVuelo)})}showNotification(){this.toastr.error('<span data-notify="icon" class="nc-icon nc-bell-55"></span><span data-notify="message">Error debe seleccionar <b>un cliente</b> para realizar la reserva.</span>',"",{timeOut:4e3,enableHtml:!0,closeButton:!0,toastClass:"alert alert-danger alert-with-icon",positionClass:"toast-bottom-center"})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(_),e.Y36(s.qu),e.Y36(d.FF),e.Y36(f._W))},t.\u0275cmp=e.Xpm({type:t,selectors:[["dashboard-cmp"]],decls:77,vars:8,consts:[[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[3,"formGroup"],[1,"col-md-4"],["formControlName","aeropuertoOrigen",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],["formControlName","aeropuertoDestino",1,"form-control",3,"change"],["formControlName","aerolinea",1,"form-control",3,"change"],["type","button",1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"table-responsive"],[1,"table"],[1,"text-primary"],[4,"ngFor","ngForOf"],["formControlName","cliente",1,"form-control"],[1,"avion"],[1,"cabina"],[1,"cola"],["content",""],[3,"value"],["title","Disponibilidad",1,"btn","btn-sm","btn-outline-success","btn-round","btn-icon",3,"click"],[1,"nc-icon","nc-tile-56"],[1,"fila"],[1,"asiento",3,"click"],[1,"modal-header"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",0)(3,"div",2)(4,"div",3)(5,"div",4),e._UZ(6,"h4",5),e.qZA(),e.TgZ(7,"div",6)(8,"form",7)(9,"div",0)(10,"div",8)(11,"select",9),e.NdJ("change",function(){return i.aplicarFiltros()}),e.YNc(12,A,2,2,"option",10),e.qZA()(),e.TgZ(13,"div",8)(14,"select",11),e.NdJ("change",function(){return i.aplicarFiltros()}),e.YNc(15,Z,2,2,"option",10),e.qZA()(),e.TgZ(16,"div",8)(17,"select",12),e.NdJ("change",function(){return i.aplicarFiltros()}),e.YNc(18,T,2,2,"option",10),e.qZA()()(),e.TgZ(19,"div",0)(20,"div",8)(21,"button",13),e.NdJ("click",function(){return i.limpiarSeleccion()}),e._uU(22,"Limpiar"),e.qZA()()()()()()()()()(),e.TgZ(23,"div",0)(24,"div",1)(25,"div",0)(26,"div",2)(27,"div",3)(28,"div",4)(29,"h5",5),e._uU(30," Vuelos Disponibles"),e.qZA()(),e.TgZ(31,"div",6)(32,"div",14)(33,"table",15)(34,"thead",16)(35,"th"),e._uU(36," # Vuelo "),e.qZA(),e.TgZ(37,"th"),e._uU(38," Origen "),e.qZA(),e.TgZ(39,"th"),e._uU(40," Destino "),e.qZA(),e.TgZ(41,"th"),e._uU(42," Salida "),e.qZA(),e.TgZ(43,"th"),e._uU(44," Llegada "),e.qZA(),e._UZ(45,"th"),e.qZA(),e.TgZ(46,"tbody"),e.YNc(47,C,16,11,"tr",17),e.qZA()()()()()()()()(),e.TgZ(48,"div",0)(49,"div",1)(50,"div",0)(51,"div",2)(52,"div",3)(53,"div",4)(54,"h5",5),e._uU(55," Selecciona un asiento"),e.qZA()(),e.TgZ(56,"div",6)(57,"div",0)(58,"div",1)(59,"form",7)(60,"div",0)(61,"div",8)(62,"select",18),e.YNc(63,q,2,3,"option",10),e.qZA()()()()()(),e.TgZ(64,"div",0)(65,"div",1)(66,"div",19)(67,"div",20)(68,"span"),e._uU(69,"Cabina De Mando"),e.qZA()(),e._UZ(70,"br"),e.YNc(71,U,3,1,"div",17),e.TgZ(72,"div",21)(73,"span"),e._uU(74,"Secci\xf3n De Cola"),e.qZA()()()()()()()()()()(),e.YNc(75,y,8,2,"ng-template",null,22,e.W1O)),2&o&&(e.xp6(8),e.Q6J("formGroup",i.formulario),e.xp6(4),e.Q6J("ngForOf",i.datosAereopuerto),e.xp6(3),e.Q6J("ngForOf",i.datosAereopuerto),e.xp6(3),e.Q6J("ngForOf",i.datosAereolinea),e.xp6(29),e.Q6J("ngForOf",i.datosVuelosFilter),e.xp6(12),e.Q6J("formGroup",i.formulario),e.xp6(4),e.Q6J("ngForOf",i.datosClientes),e.xp6(8),e.Q6J("ngForOf",i.datosReserva))},dependencies:[c.sg,s._Y,s.YN,s.Kr,s.EJ,s.JJ,s.JL,s.sg,s.u,c.uU],encapsulation:2}),t})()},{path:"reservas",component:(()=>{class t{constructor(o,i){this.backService=o,this.formBuilder=i,this.formulario=this.formBuilder.group({cliente:[""]})}ngOnInit(){this.obtenerDatosClientes()}cambioCliente(){const{cliente:o}=this.formulario.value;this.backService.get("/reserva/reserva/"+o).subscribe(i=>{this.datosReservas=i})}obtenerDatosClientes(){this.backService.get("/usuario").subscribe(o=>{this.datosClientes=o})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(_),e.Y36(s.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["reservas-cmp"]],decls:40,vars:3,consts:[[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[3,"formGroup"],[1,"col-md-4"],["formControlName","cliente",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"table-responsive"],[1,"table"],[1,"text-primary"],[4,"ngFor","ngForOf"],[3,"value"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",0)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h6",5),e._uU(7,"Selecciona un cliente."),e.qZA()(),e.TgZ(8,"div",6)(9,"form",7)(10,"div",0)(11,"div",8)(12,"select",9),e.NdJ("change",function(){return i.cambioCliente()}),e.YNc(13,O,2,3,"option",10),e.qZA()()()()()()()()()(),e.TgZ(14,"div",0)(15,"div",1)(16,"div",0)(17,"div",2)(18,"div",3)(19,"div",4)(20,"h5",5),e._uU(21,"Lista De Reservas"),e.qZA()(),e.TgZ(22,"div",6)(23,"div",11)(24,"table",12)(25,"thead",13)(26,"th"),e._uU(27," # Vuelo "),e.qZA(),e.TgZ(28,"th"),e._uU(29," Origen "),e.qZA(),e.TgZ(30,"th"),e._uU(31," Destino "),e.qZA(),e.TgZ(32,"th"),e._uU(33," Salida "),e.qZA(),e.TgZ(34,"th"),e._uU(35," Llegada "),e.qZA(),e.TgZ(36,"th"),e._uU(37," # Asiento "),e.qZA()(),e.TgZ(38,"tbody"),e.YNc(39,J,15,13,"tr",14),e.qZA()()()()()()()()()),2&o&&(e.xp6(9),e.Q6J("formGroup",i.formulario),e.xp6(4),e.Q6J("ngForOf",i.datosClientes),e.xp6(26),e.Q6J("ngForOf",i.datosReservas))},dependencies:[c.sg,s._Y,s.YN,s.Kr,s.EJ,s.JJ,s.JL,s.sg,s.u,c.uU],encapsulation:2}),t})()}];let k=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.ez,g.Bz.forChild(R),s.u5,s.UX,d.IJ]}),t})()}}]);